TEMPLATE_V1
{echo_off}
{set:render;"title":"Variables"}
{set:render;"nav_render":"active"}
{echo_on}

{include:header.inc}

{f:setrvvar}
{b:startSession}

<h1>Template Variables</h1>

<p class="text-muted">This page demonstrates the template variable system.
Commands are shown alongside their output using <code>&#123;echo_funcs_on&#125;</code>.</p>

{echo_funcs_on:<tr><td class="mono">:<td>}

<h2>Global Variables</h2>
<p class="text-small text-muted">Access via <code>&#123;get:global;"name"&#125;</code></p>
<table>
    <tr><th>Command</th><th>Output</th></tr>
    {get:global;"g_test1"}
    {get:global;"g_test2"}
    {get:global;"g_test3"}
    {get:global;"g_test4"}
</table>

<h2>Render Variables</h2>
<p class="text-small text-muted">Access via <code>&#123;get:render;"name"&#125;</code> - scope: current request</p>
<table>
    <tr><th>Command</th><th>Output</th></tr>
    {get:render;"test1"}
    {get:render;"test2"}
    {get:render;"test3"}
    {get:render;"test4"}
</table>

<h2>Session Variables</h2>
<p class="text-small text-muted">Access via <code>&#123;get:session;"name"&#125;</code> - scope: user session</p>
<table>
    <tr><th>Command</th><th>Output</th></tr>
    {get:session;"test2"}
    {get:session;"test20"}
</table>

<h2>Arrays</h2>
<p class="text-small text-muted">Arrays can be accessed by key or index</p>

<h3>Full Array</h3>
<table>
    <tr><th>Command</th><th>Output</th></tr>
    {get:render;"testarray1"}
</table>

<h3>Access by Key</h3>
<table>
    <tr><th>Command</th><th>Output</th></tr>
    {get:render;"testarray1"["entry_1"]}
    {get:render;"testarray1"["entry_2"]}
    {get:render;"testarray1"["entry_3"]}
    {get:render;"testarray1"["entry_N"]}
</table>

<h3>Access by Index</h3>
<table>
    <tr><th>Command</th><th>Output</th></tr>
    {get:render;"testarray1"[0]}
    {get:render;"testarray1"[1]}
    {get:render;"testarray1"[2]}
    {get:render;"testarray1"[3]}
</table>

<h2>Loops</h2>
<p class="text-small text-muted">Iterate over arrays with <code>&#123;loop&#125;...&#123;endloop&#125;</code></p>

{echo_funcs_on:<td class="mono">}

<h3>Loop without key variable</h3>
<table>
    <tr><th>Command</th><th>Key</th><th>Value</th></tr>
    <tr><td class="mono">&#123;loop:render;"testarray1":"tmp"&#125;</td><td colspan="2"></td></tr>
    {loop:render;"testarray1":"tmp"}
    <tr>{get:render;"key"}{get:render;"tmp"}</tr>
    {endloop}
    <tr><td class="mono">&#123;endloop&#125;</td><td colspan="2"></td></tr>
</table>

<h3>Loop with key variable</h3>
<table>
    <tr><th>Command</th><th>Key</th><th>Value</th></tr>
    <tr><td class="mono">&#123;loop:render;"testarray1":"tmp":"key"&#125;</td><td colspan="2"></td></tr>
    {loop:render;"testarray1":"tmp":"key"}
    <tr>{get:render;"key"}{get:render;"tmp"}</tr>
    {endloop}
    <tr><td class="mono">&#123;endloop&#125;</td><td colspan="2"></td></tr>
</table>

{echo_funcs_off}

{include:footer.inc}
